# 学マス プロデュースモード実装計画

ユーザーはメインゲームループ（プロデュースモード）の実装を開始したいと考えています。
この計画では、シミュレーションエンジンとUIを構築するための手順を概説します。

## 目標
カードを使用してステータス（スコア）を上げながら、リソース（HP、元気）を管理する「プロデュース」（シミュレーション）モードの核となる機能を実装する。

## ユーザー確認事項
- **優先順位:** 「データがないと何も表示できない」ため、まずは**ロジック（状態と型定義）**から始め、その後にUIを作成することを提案します。
- **状態管理:** ゲームの状態管理には、独自のReactフック（`useSimulation`）を使用する予定です。

## 変更内容

### ロジック層（コアシミュレーション）
#### [MODIFY] [useSimulation.ts](file:///c:/学マスシュミレーション/src/hooks/useSimulation.ts)
- **GameStateの定義**:
  - ユーザーの指示待ち
- **アクション/レデューサーの実装**:
  - ユーザーの指示待ち

### UI層（ステージ画面）
#### [MODIFY] [ProduceView.tsx](file:///c:/学マスシュミレーション/src/components/ProduceView.tsx)
- プレースホルダーを実際のゲーム画面に置き換える。
- **レイアウト:**
  - **上部:** ターン数、スコア、試験基準（敵）。
  - **中央:** キャラクター状態（HP、元気など）、エフェクト表示。
  - **下部:** 手札。
- `useSimulation` フックを組み込んで画面を動かす。

### 設計原則 (Design Principles)
> [!IMPORTANT]
> **Function-Based & Data-Driven**
> - **全てに関数を使用する**: ロジックはハードコードせず、再利用可能な関数として定義する。
> - **JSON管理**: パラメータ、カードデータ、敵の行動パターンなどは可能な限りJSONファイルで管理し、プログラムから読み込む形式とする。

### 固定プロデュース仕様 (Fixed Produce Specs)
#### 対象プラン (Target Plan)
- **ロジック (Logic) 限定**: 今回はロジックプランのプロデュースシミュレーションのみを対象とする。他のプラン（センス等）は後回し。

#### 基本設定 (Configuration)
- **ターン数 (Turns)**: 設定可能にする（JSON等で定義）。
- **体力 (HP)**: 初期値を設定可能にする（JSON等で定義）。


### 型定義
#### [MODIFY] [index.ts](file:///c:/学マスシュミレーション/src/types/index.ts)
- `GameState`、`TurnPhase`、`Buff` などの型を追加。

## 検証計画

### 手動検証
1.  **ゲーム開始:** 「開始」ボタンを押すと、選択したデッキとアイテムで状態が初期化されることを確認する。
2.  **表示:** HP、スコア、ターン数が正しく表示されているか確認する。
3.  **インタラクション:**
    - カードをクリック -> 「プレイされました」というログが出るか（効果はまだ空でもOK）。
    - ターン終了 -> ターン数が増えるか確認する。
